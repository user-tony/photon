$().ready(readyFunction);$(window).resize(resizeFunction);var widgetsLoaded=[];function resizeFunction(){setSidebarHeight();setBlankWidgets();resizeEnd();$('.active-menu').removeClass('active-menu');$('.nav-active').removeClass('nav-active');$('.mobMMExpanded').removeClass('mobMMExpanded');}
function readyFunction(){setSidebarHeight();mainMenuFunction();setBlankWidgets(true);jstreeHover();$('.xbreadcrumbs').xBreadcrumbs();$('.bootstrap-tooltip').tooltip();$.pnotify.defaults.delay-=4500;$.pnotify.defaults.history=false;$.jstree._themes="css/plugins/jstree/";$(".sidebarMenuHolder").mCustomScrollbar({scrollButtons:{enable:true},advanced:{updateOnBrowserResize:true,updateOnContentResize:true}});$(".Jstree_shadow_top").prependTo(".sidebarMenuHolder");$(".Jstree_shadow_bottom").appendTo(".sidebarMenuHolder");$('.panel-slider-arrow').on('click',function(){$('.panel, .main-content').toggleClass('retracted');if($('.panel').is('.retracted')){$.cookie('jsTreeMenu','retracted',{expires:7,path:'/'});}
else{$.cookie('jsTreeMenu','extended',{expires:7,path:'/'});}
if($.cookie('jsTreeMenuNotification')!='true'){$.cookie('jsTreeMenuNotification','true',{expires:7,path:'/'});$.pnotify({title:'Slide Menu Remembers It\'s State',type:'info',text:'Slide menu will remain closed when you browse other pages, until you open it again.'});}});if($.cookie('themeColor')=='light'){$('body').addClass('light-version');}}
function mainMenuFunction(){setTimeout(function(){$('.nav-fixed-left').removeAttr('style');},300);$('.nav-side-menu > li').on('mouseleave',function(){if($('.nav-fixed-left').css('top')!='0px')return;var $subMenu=$(this).find('ul');$subMenu.fadeOut(100);setTimeout(function(){$subMenu.removeAttr('style');},200);});$('.nav-side-menu > li').on('click',function(){var $touchedMenu=$(this).find('ul');var $subMenu=$('.sub-nav ul').not($touchedMenu);$('.nav-side-menu > li').not(this).removeClass('nav-active');$(this).toggleClass('nav-active');if($('.nav-fixed-left').css('top')=='0px')$subMenu.fadeOut(100);setTimeout(function(){$subMenu.removeAttr('style');},200);});$('.btn-mobile-menus .btn').on('click',function(){if($(this).is('.active-menu'))$('.active-menu').removeClass('active-menu');else{$('.active-menu').removeClass('active-menu');$(this).addClass('active-menu');}
if($('.btn-main-menu').is('.active-menu')){$('.mobMMExpanded').removeClass('mobMMExpanded');$('.nav-fixed-left').addClass('mobMMExpanded');}
else if($('.btn-user-menu').is('.active-menu')){$('.mobMMExpanded').removeClass('mobMMExpanded');$('.nav-fixed-topright').addClass('mobMMExpanded');}
else $('.mobMMExpanded').removeClass('mobMMExpanded');});}
function setSidebarHeight(){if($('.panel-slider-center .panel-slider-arrow').css('position')!='absolute'){$win_hei=$(window).height();$(".sidebarMenuHolder").height($win_hei- 185);}
else{$(".sidebarMenuHolder").height(300);}}
var lastWidgetPerRow;function setBlankWidgets(onReady){if(!$('body').is('.body-dashboard'))return;var widgetPerRow;widgetPerRow=parseInt($('.dashboard-widget-group').css('background-position'),10);if(widgetPerRow==lastWidgetPerRow)return;$('.blank-widget').remove();var currentWidgetCount=$('.widget-holder').length;var finalWidgetCount=Math.ceil(currentWidgetCount/widgetPerRow)*widgetPerRow;for(var i=finalWidgetCount- currentWidgetCount;i>0;i--){$.get('./library/widgets/blank-widget.php',createBlankWidget);}
lastWidgetPerRow=widgetPerRow;}
function createBlankWidget(data){var html=$(data).appendTo('#photon_widgets');}
function autoGrowField(f,max){max=(typeof max=='undefined')?1000:max;if(f.scrollHeight>max){if(f.style.overflowY!='scroll'){f.style.overflowY='scroll';}
return;}
if(f.style.overflowY!='hidden'){f.style.overflowY='hidden';}
var scrollH=f.scrollHeight;if(scrollH>f.style.height.replace(/[^0-9]/g,'')){f.style.height=scrollH+20+'px';}}
function jstreeHover(){$('.overflowing').removeClass('overflowing');if($('.panel-slider-center .panel-slider-arrow').css('position')!='absolute'){setTimeout(function(){$('.jstree li').each(function(){if(isTextOverflowing($(this))){var title=$('>a',this).text();$(this).tooltip({title:title,placement:'right',container:'.panel'});}});},500);}}
function showColorChanger(){}
function isTextOverflowing($elem){returnVal=false;if($elem.get(0).offsetWidth<$elem.get(0).scrollWidth){returnVal=true;$elem.addClass('overflowing');}
return returnVal;}
var isResizing;function resizeEnd(){clearTimeout(isResizing);isResizing=setTimeout(function(){jstreeHover();},300);}
function flipit(elem){$(elem).parents('.widget-holder').toggleClass('flip-it');}